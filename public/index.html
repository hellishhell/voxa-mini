<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Voxa</title>
    <link rel="stylesheet" href="style.css?v=99">
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>
    <div id="voxa">
        
        <div id="auth-screen" class="view active">
            <div class="auth-box">
                <h1>Voxa</h1>
                <div class="auth-tabs">
                    <span id="t-login" class="tab active" onclick="toggleAuth(false)">Вход</span>
                    <span id="t-reg" class="tab" onclick="toggleAuth(true)">Регистрация</span>
                </div>
                <div class="auth-form">
                    <input type="text" id="log-in" placeholder="Логин" class="ios-input">
                    <input type="password" id="pas-in" placeholder="Пароль" class="ios-input">
                    <input type="text" id="usr-in" placeholder="@username" class="ios-input hidden">
                    <button onclick="doAuth()" class="ios-btn-main">Продолжить</button>
                </div>
            </div>
        </div>

        <div id="main-screen" class="view">
            <div class="main-header">
                <h2>Чаты</h2>
                <div onclick="showProfile(true)" id="my-avatar" class="av-circle-main"></div>
            </div>
            <div class="search-section">
                <input type="text" id="search-in" placeholder="Поиск в Voxa..." oninput="doSearch()" class="ios-search">
            </div>
            <div id="contacts-list" class="chats-list"></div>
        </div>

        <div id="profile-modal" class="modal-overlay hidden">
            <div class="modal-card">
                <div id="prof-preview" class="av-circle-lg"></div>
                <label class="btn-change-photo">Сменить фото <input type="file" hidden onchange="updateAv(this)"></label>
                
                <div class="profile-name-row">
                    <span id="prof-user-label">@username</span>
                    <button class="btn-edit" onclick="changeUser()">✎</button>
                </div>

                <div class="modal-actions">
                    <button onclick="logout()" class="btn-danger">Выход</button>
                    <button onclick="showProfile(false)" class="btn-secondary">Закрыть</button>
                </div>
            </div>
        </div>

        <div id="chat-screen" class="view">
            <div class="chat-header">
                <button onclick="closeChat()" class="btn-back">⟨ Назад</button>
                <b id="chat-title">@user</b>
                <div id="chat-avatar" class="av-circle-sm"></div>
            </div>
            <div id="chat-flow" class="chat-messages"></div>
            <div class="chat-input-bar">
                <input type="text" id="msg-in" placeholder="Сообщение">
                <button onclick="sendTxt()" class="btn-send">↑</button>
            </div>
        </div>

    </div>
    <script src="app.js"></script>
</body>
</html>
